# -*- coding: utf-8 -*-
"""Untitled8.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1bzAoRh7CzbTkFVGoxi5dPRxjHVp96B1b
"""

! git clone https://github.com/ultralytics/yolov5.git

# Commented out IPython magic to ensure Python compatibility.
# %cd /content/yolov5

!pip install -r requirements.txt

!nvidia-smi

# Commented out IPython magic to ensure Python compatibility.
# %load_ext tensorboard

# Commented out IPython magic to ensure Python compatibility.
# %tensorboard --logdir runs/train

"""there are many troubles!!!!!
1. create a file 
2.transfer some data into a same root file
3. deal with xml to txt
4. up load new label set
5. put them into a same file, like the yolov5 official website
"""

!pip install -q roboflow

from roboflow import Roboflow # you can create the dataset on reboflow and then copy the code from it 
rf = Roboflow(api_key="zBKuhAHoRQbm5MIouica")
project = rf.workspace("llll123").project("v4")
dataset = project.version(1).download("yolov5")

!python train.py --img 640 --batch 16 --data {dataset.location}/data.yaml --weights yolov5s.pt --patience 300 --cache



!python train.py --img 640 --batch 32 --data  {dataset.location}/data.yaml --weights yolov5m.pt --epochs 100

!python train.py --img 640 --batch 16 --data {dataset.location}/data.yaml --weights yolov5l.pt --cache

! python detect.py  --source 2.mp4 --weights /content/yolov5/runs/train/exp3/weights/best.pt --conf 0.4 --iou-thres 0.6 --dnn
